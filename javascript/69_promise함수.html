<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>promise í•¨ìˆ˜</title>
</head>
<body>
  <script>
  function getBanana() {
    return new Promise((resolve) => {
        setTimeout(() => {
            resolve('ğŸŒ')
        }, 1000)
    })
}

function getApple () {
  return new Promise((resolve) => {
    setTimeout(()=> {
      resolve("ğŸ")
    },3000)
  })
}

function getOrange() {
  return Promise.reject(new Error("ì˜¤ë Œì§€ ì—†ìŒ"))//ë³µìŠµ!!
}

getBanana()
    .then((banana) => getApple().then((apple) => [banana, apple]))
    .then(console.log)
//ë°”ë‚˜ë‚˜í˜¸ì¶œ, ë¦¬ì¡¸ë¸Œë˜ì–´ ë°”ë‚˜ë‚˜ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ëŠ”ë‹¤. ë°”ë¡œ ìµëª…í•¨ìˆ˜ì—ì„œ ê²Ÿì• í”Œ í˜¸ì¶œ,
//3ì´ˆê°€ ì§€ë‚œ í›„ ë¦¬ì¡¸ë¸Œê°€ ì‹¤í–‰ë˜ì–´ ì‚¬ê³¼ë¥¼ ë°›ëŠ”ë‹¤. 
//ë°”ë‚˜ë‚˜ì™€ ì‚¬ê³¼ë¥¼ ë°°ì—´ë¡œ ë¬¶ì–´ì¤Œ
//ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë¨(4ì´ˆ ê±¸ë¦¼)


// Promise.all: ë³‘ë ¬ì ìœ¼ë¡œ í•œë²ˆì— Promiseë“¤ì„ ì‹¤í–‰. í•˜ë‚˜ì˜ í”„ë¡œë¯¸ìŠ¤ë¼ë„ ì‹¤íŒ¨í•˜ë©´ ì „ì²´ë¥¼ ì—ëŸ¬ë¡œ ì²˜ë¦¬í•¨
Promise.all([getBanana(), getApple()])
    .then((fruits) => console.log('all', fruits))
    //3ì´ˆì— ë§ì¶°ì„œ ê°™ì´ ë‚˜ì˜´

    Promise.all([getBanana(), getApple(), getOrange()])
    .then((fruits) => console.log('all', fruits))
    .catch(console.log)

// Promise.race: ì£¼ì–´ì§„ Promiseì¤‘ì— ê°€ì¥ ë¹¨ë¦¬ ìˆ˜í–‰ëœ ê²ƒì´ ì‹¤í–‰
Promise.race([getBanana(), getApple()])
    .then((fruits) => console.log('race', fruits))

// Promise.allSettled: ì—¬ëŸ¬ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë³‘ë ¬ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ë˜ í•˜ë‚˜ì˜ í”„ë¡œë¯¸ìŠ¤ê°€ ì‹¤íŒ¨í•´ë„ ë¬´ì¡°ê±´ ì´í–‰
Promise.allSettled([getBanana(), getApple(), getOrange()])
    .then((fruits) => console.log('allSettled', fruits)) //ê²°ê³¼ë¥¼ allSettledì— ì…ë ¥
    .catch(console.log) //ê²°ê³¼ë¥¼ ì°ëŠ”ë‹¤
    
</script>
</body>
</html>